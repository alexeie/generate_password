#!/bin/bash

#function gen_pass {
#  local len=${2:-20}
#  local num=${1:-3}

#  source github/generate_password/venv/bin/activate
#  python3 github/generate_password/generate_password.py -l "$len" -n "$num"
#  deactivate
#}

# Function: gen_pass
# Description: 
#   Generates a strong, random password using the `generate_password.py` script.
#   The script is located in a subdirectory relative to this Bash script, and 
#   it runs within a Python virtual environment to ensure proper dependency management.

# Arguments:
#   $1 [optional]: 
#     The number of passwords to generate.
#     Default: 1
#   $2 [optional]: 
#     The total length of the password.
#     Default: 12

# Usage:
#   gen_pass             # Generate 1x 12-character password (default)
#   gen_pass 5 20        # Generate 5x 20-character passwords

# Output:
#   Prints the generated password(s) to the console.

# Dependencies:
#   - Python 3
#   - Virtual environment located in the 'generate_password/venv' subdirectory
#   - `generate_password.py` script within the 'generate_password' subdirectory

# Notes:
#   - The function automatically activates and deactivates the virtual environment
#     to ensure the correct Python version and dependencies are used.
#   - If you encounter errors, ensure the virtual environment is set up correctly 
#     and that the `generate_password.py` script is executable.

function gen_pass {
    local script_dir="$(dirname "${BASH_SOURCE[0]}")"
    local venv_path="$script_dir/generate_password/venv"  # Path to virtual environment
    local script_path="$script_dir/generate_password/generate_password.py"

    local num=${1:-1}     # Numbver of passwords generated. Default to 1 if $1 is unset or null
    local len=${2:-12}    # Number of caharcters in passwords. Default to 12 if $2 is unset or null

    source "$venv_path/bin/activate"  # Activate the virtual environment
    python3 "$script_path" -n "$num" -l "$len"  # Execute the script
    deactivate  # Deactivate the virtual environment
}

